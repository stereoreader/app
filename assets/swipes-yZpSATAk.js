import{w as F,r as H,g as P,s as j,v as I,n as J,a as A}from"./index-CZrgtyhk.js";function K(a,l,o,f={}){const N=f.delay??500,O=f.interval??250;let L=!1,h=null,T=0,b=0,r=null,c=null,u=null,v=0,w=0,m={x:0,y:0},g=null,p=null;function x(){g!==null&&(window.clearTimeout(g),g=null),p!==null&&(window.clearInterval(p),p=null)}function V(e,t,n){x(),g=window.setTimeout(()=>{o(e,t,n),p=window.setInterval(()=>{u&&o(u,w,m)},O)},N)}function Y(e,t,n,y,s,i){u=e,r=y,c=n,v=t,w=s,m=i,l(e,s,i),V(e,s,i)}function z(){L=!1,h=null,r=null,c=null,u=null,v=0,x()}function k(e){if(e.touches.length<1)return;const t=e.target;if(!t||!a.contains(t))return;const n=e.touches[0];h=n.identifier,T=n.clientX,b=n.clientY,L=!0,r=null,c=null,u=null,v=0,w=0,m={x:T,y:b},x()}function G(e){if(!L)return;let t=null;for(let d=0;d<e.touches.length;d++)if(h===null||e.touches[d].identifier===h){t=e.touches[d];break}if(!t)return;const n=t.clientX-T,y=t.clientY-b,s={x:t.clientX,y:t.clientY},i=r??(Math.abs(n)>=Math.abs(y)?"x":"y"),$=i==="x"?n:y,D=i==="x"?t.clientX:t.clientY,X=$>=0?1:-1,S=Math.abs($);let B=i==="x"?X===1?"right":"left":X===1?"down":"up";if(w=S,m=s,u===null){S>=50&&Y(B,D,X,i,S,s);return}if(i!==r)return;const q=D-v,C=q>=0?1:-1;C!==c&&Math.abs(q)>=50&&Y(r==="x"?c===1?"left":"right":c===1?"up":"down",D,C,r,S,s)}function E(){z()}return a.addEventListener("touchstart",k,{passive:!0}),window.addEventListener("touchmove",G,{passive:!0}),window.addEventListener("touchend",E,{passive:!0}),window.addEventListener("touchcancel",E,{passive:!0}),()=>{x(),a.removeEventListener("touchstart",k),window.removeEventListener("touchmove",G),window.removeEventListener("touchend",E),window.removeEventListener("touchcancel",E)}}let M=null;F(H,a=>{a?M=K(a,async l=>{if(["left","right"].includes(l)&&P.itemSwipeX==="pageNav")if(l==="right"){I.value[0].activate(),await J();const o=document.querySelector('.reader > div > div > div[idx="1"]');return o&&A(o,"end")}else{I.value.at(-1).activate(),await new Promise(f=>setTimeout(f,100));const o=document.querySelector(`.reader > div > div > div[idx="${I.value.length}"]`);return o&&A(o,"start")}},l=>{["left","right"].includes(l)&&P.itemSwipeX==="adjustGap"&&(l==="left"?j.incrementGap(-1):l==="right"&&j.incrementGap(1))}):(M?.(),M=null)});
