import{s as l,g as h,w as b}from"./index-5VpD7k4q.js";import{I as f}from"./ItemGame-C3ToN1ql.js";class u{size=5;containers=[];numbers=[];resizeObserver=null;removalObserver=null;off;get fontSize(){return l.fontSize}get textColor(){return h.textColor}start(t){if(t.length===0)throw new Error("At least one container is required");this.stop(),this.off=b([()=>l.fontSize,()=>h.textColor],()=>this.render()),this.containers=t,this.observeResize(),this.observeRemoval(),this.next()}next(){this.generateNumbers(),this.render()}stop(){this.resizeObserver?.disconnect(),this.removalObserver?.disconnect(),this.resizeObserver=null,this.removalObserver=null;for(const t of this.containers)t.innerHTML="";this.containers=[],this.numbers=[],this.off?.()}generateNumbers(){const t=this.size*this.size;this.numbers=Array.from({length:t},(s,r)=>r+1);for(let s=t-1;s>0;s-=1){const r=Math.floor(Math.random()*(s+1)),i=this.numbers[s];this.numbers[s]=this.numbers[r],this.numbers[r]=i}}render(){const s=this.containers[0].getBoundingClientRect(),r=s.width/this.size,i=s.height/this.size;for(const n of this.containers){n.innerHTML="";for(let o=0;o<this.numbers.length;o+=1){const c=Math.floor(o/this.size),m=o%this.size,e=document.createElement("div");e.textContent=String(this.numbers[o]),e.style.position="absolute",e.style.left=`${m*r}px`,e.style.top=`${c*i}px`,e.style.width=`${r}px`,e.style.height=`${i}px`,e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.boxSizing="border-box",e.style.border=`1px solid ${this.textColor}`,e.style.color=this.textColor,e.style.fontSize=`${this.fontSize}px`,e.style.lineHeight=`${this.fontSize}px`,e.style.overflow="hidden",e.style.whiteSpace="nowrap",n.appendChild(e)}}}observeResize(){const t=this.containers[0];this.resizeObserver=new ResizeObserver(()=>{this.render()}),this.resizeObserver.observe(t)}observeRemoval(){const t=this.containers[0],s=t.parentNode;s&&(this.removalObserver=new MutationObserver(r=>{for(const i of r)for(const n of i.removedNodes)if(n===t){this.stop();return}}),this.removalObserver.observe(s,{childList:!0}))}}class v extends f{game;onOpen(){setTimeout(()=>{this.game=new u,this.game.start([...document.querySelectorAll(".reader .playground")])})}next(){this.game?.next()}}export{v as ItemGameShulte,v as default};
