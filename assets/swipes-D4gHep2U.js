import{w as P,r as V,g as E,v as Y,n as z,s as A,a as L}from"./index-iqhWs7-6.js";function B(a,y,n,o={}){const u=o.delay??500,C=o.interval??250;let T=!1,h=null,I=0,M=0,r=null,c=null,f=null,v=0,w=null,m=null;function p(){w!==null&&(window.clearTimeout(w),w=null),m!==null&&(window.clearInterval(m),m=null)}function U(e,t,i){p(),w=window.setTimeout(()=>{m=window.setInterval(()=>{},C)},u)}function G(e,t,i,S,x,s){f=e,r=S,c=i,v=t,y(e,x,s),U()}function N(){T=!1,h=null,r=null,c=null,f=null,v=0,p()}function H(e){if(e.touches.length<1)return;const t=e.target;if(!t||!a.contains(t))return;const i=e.touches[0];h=i.identifier,I=i.clientX,M=i.clientY,T=!0,r=null,c=null,f=null,v=0,p()}function W(e){if(!T)return;let t=null;for(let d=0;d<e.touches.length;d++)if(h===null||e.touches[d].identifier===h){t=e.touches[d];break}if(!t)return;const i=t.clientX-I,S=t.clientY-M,x={x:t.clientX,y:t.clientY},s=r??(Math.abs(i)>=Math.abs(S)?"x":"y"),$=s==="x"?i:S,X=s==="x"?t.clientX:t.clientY,b=$>=0?1:-1,D=Math.abs($);let O=s==="x"?b===1?"right":"left":b===1?"down":"up";if(f===null){D>=50&&G(O,X,b,s,D,x);return}if(s!==r)return;const j=X-v,q=j>=0?1:-1;q!==c&&Math.abs(j)>=50&&G(r==="x"?c===1?"left":"right":c===1?"up":"down",X,q,r,D,x)}function g(){N()}return a.addEventListener("touchstart",H,{passive:!0}),window.addEventListener("touchmove",W,{passive:!0}),window.addEventListener("touchend",g,{passive:!0}),window.addEventListener("touchcancel",g,{passive:!0}),()=>{p(),a.removeEventListener("touchstart",H),window.removeEventListener("touchmove",W),window.removeEventListener("touchend",g),window.removeEventListener("touchcancel",g)}}let k=null;P(V,a=>{if(a){const y=async(n,o)=>{if(o==="pageNav")if(n==="right"){Y.value[0].activate(),await z();const l=document.querySelector('.reader > div > div > div[idx="1"]');return l&&A(l,"end")}else{Y.value.at(-1).activate(),await new Promise(u=>setTimeout(u,100));const l=document.querySelector(`.reader > div > div > div[idx="${Y.value.length}"]`);return l&&A(l,"start")}else o==="adjustGap"?n==="left"?L.incrementGap(-1):n==="right"&&L.incrementGap(1):o==="adjustWidth"&&(n==="left"?L.incrementWidth(-1):n==="right"&&L.incrementWidth(1))};k=B(a,async(n,o,l)=>{if(n==="up"||n==="down")return;const u=l.y/window.innerHeight;y(n,u<=.5?E.itemSwipeXUpper:E.itemSwipeXLower==="same"?E.itemSwipeXUpper:E.itemSwipeXLower)})}else k?.(),k=null});
